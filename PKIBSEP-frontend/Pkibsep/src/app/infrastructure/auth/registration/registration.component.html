<div *ngIf="!registrationSuccess" style="max-width: 500px; margin: 10px auto; padding: 20px;">
    <h2 style="text-align: center; margin-bottom: 20px;">Register</h2>
    <form [formGroup]="registrationForm" (ngSubmit)="register()" style="margin-top: 0px;">
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <mat-form-field>
                <mat-label>Email</mat-label>
                <input matInput formControlName="email" type="email"/>
                <mat-error *ngIf="registrationForm.get('email')?.hasError('required')">
                    Email is required
                </mat-error>
                <mat-error *ngIf="registrationForm.get('email')?.hasError('email')">
                    Please enter a valid email address
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Username</mat-label>
                <input matInput formControlName="username" type="text"/>
                <mat-error *ngIf="registrationForm.get('username')?.hasError('required')">
                    Username is required
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Organization</mat-label>
                <input matInput formControlName="organization" type="text"/>
                <mat-error *ngIf="registrationForm.get('organization')?.hasError('required')">
                    Organization is required
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Password</mat-label>
                <input matInput formControlName="password" type="password"/>
                <mat-error *ngIf="registrationForm.get('password')?.hasError('required')">
                    Password is required
                </mat-error>
                <mat-error *ngIf="registrationForm.get('password')?.hasError('minlength')">
                    Password must be at least 8 characters
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Confirm Password</mat-label>
                <input matInput formControlName="confirmPassword" type="password"/>
                <mat-error *ngIf="registrationForm.get('confirmPassword')?.hasError('required')">
                    Please confirm your password
                </mat-error>
                <mat-error *ngIf="registrationForm.hasError('passwordMismatch') && registrationForm.get('confirmPassword')?.touched">
                    Passwords do not match
                </mat-error>
            </mat-form-field>

            <div *ngIf="errorMessage" style="color: red; margin-bottom: 10px;">
                {{ errorMessage }}
            </div>

            <button color="primary" type="submit" mat-raised-button [disabled]="isLoading">
                {{ isLoading ? 'Registering...' : 'Register' }}
            </button>
        </div>
    </form>
</div>

<div *ngIf="registrationSuccess" style="max-width: 600px; margin: 50px auto; padding: 20px; text-align: center;">
    <mat-icon style="font-size: 64px; width: 64px; height: 64px; color: green;">mark_email_read</mat-icon>
    <h2>Registration Successful!</h2>
    <p>A verification email has been sent to <strong>{{ registeredEmail }}</strong></p>
    <p>Please check your email and click the verification link to activate your account.</p>
</div>


